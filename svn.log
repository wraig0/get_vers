------------------------------------------------------------------------
r59 | tomun | 2020-03-15 21:15:21 +0000 (Sun, 15 Mar 2020) | 1 line
Changed paths:
   A /get_vers/trunk/read_vers.bat
   D /get_vers/trunk/readvers.bat

changed file name

Index: readvers.bat (deleted)
===================================================================
Index: read_vers.bat
===================================================================
--- read_vers.bat	(nonexistent)
+++ read_vers.bat	(revision 59)
@@ -0,0 +1,41 @@
+:: author - Thomas Underwood
+:: date   - 2020/03/15
+:: call readvers.bat, which reads vers.php in this directory
+:: this is then used to create a tag under that version number
+:: read_vers.bat 2020 © Thomas Underwood
+::
+:: reads the file vers.php in the same directory and echoes the version number
+:: this assumes that the file follow the following expected format
+:: <?php
+::     $vers = 1.1.1.1;
+:: ?>
+@echo off
+SETLOCAL EnableDelayedExpansion
+:: expects verion file to be named vers.php by default
+:: if using default value vers.php, it will be looked for
+:: in the directory from which this script is called.
+:: e.g if doing CALL somedir/read_vers.bat, vers.php
+:: should be one level up, etc.
+SET versfile=vers.php
+:: find the line that doesn't have a ? and put it in text.txt
+ECHO Detecting version number in %versfile%..
+FOR /F "delims=" %%a in ('findstr /v "?" %versfile% ') DO SET var=%%a
+:: remove the $vers
+SET newvar=!var:$vers=!
+:: remove the whitespace
+SET newvar=!newvar: =! 
+:: echo what we have into the temp file
+ECHO !newvar! > temp1.txt
+:: hide the temp file
+ATTRIB +H temp1.txt
+:: read the file using = as a delimeter to remove it
+FOR /F "delims==;" %%b in (temp1.txt) DO SET endvar=%%b
+:: endvar is now version number, output to version.txt
+ECHO !endvar! > temp_version.txt
+:: hide the temp file
+ATTRIB +H temp_version.txt
+:: tidy up, unhide temp file first
+ATTRIB -H temp1.txt
+DEL temp1.txt
+:: return to where this sr was called
+EXIT /B
\ No newline at end of file

------------------------------------------------------------------------
r58 | tomun | 2020-03-15 21:15:00 +0000 (Sun, 15 Mar 2020) | 3 lines
Changed paths:
   M /get_vers/trunk/readvers.bat

added comments.
added hidden temp files.
made commands upper case

Index: readvers.bat
===================================================================
--- readvers.bat	(revision 57)
+++ readvers.bat	(revision 58)
@@ -1,23 +1,41 @@
-:: author - tom underwood
-:: date   - 14/march/2020
-:: reads vers.php in the same directory and echoes the version number
+:: author - Thomas Underwood
+:: date   - 2020/03/15
+:: call readvers.bat, which reads vers.php in this directory
+:: this is then used to create a tag under that version number
+:: read_vers.bat 2020 © Thomas Underwood
+::
+:: reads the file vers.php in the same directory and echoes the version number
 :: this assumes that the file follow the following expected format
 :: <?php
 ::     $vers = 1.1.1.1;
 :: ?>
 @echo off
-setlocal EnableDelayedExpansion
-set alphachars=$vers
-set versfile=vers.php
+SETLOCAL EnableDelayedExpansion
+:: expects verion file to be named vers.php by default
+:: if using default value vers.php, it will be looked for
+:: in the directory from which this script is called.
+:: e.g if doing CALL somedir/read_vers.bat, vers.php
+:: should be one level up, etc.
+SET versfile=vers.php
 :: find the line that doesn't have a ? and put it in text.txt
-echo Detecting version number in %versfile%..
-for /F "delims=" %%a in ('findstr /v "?" %versfile% ') do set var=%%a
-set newvar=!var:$vers=!
-set newvar=!newvar: =! 
-echo !newvar! > temp1.txt
-for /F "delims==;" %%b in (temp1.txt) do set endvar=%%b
-:: endbar is now version number, output to version.txt
-echo !endvar! > temp_version.txt
-:: tidy up
-echo Deleting temporary file..
-del temp1.txt
\ No newline at end of file
+ECHO Detecting version number in %versfile%..
+FOR /F "delims=" %%a in ('findstr /v "?" %versfile% ') DO SET var=%%a
+:: remove the $vers
+SET newvar=!var:$vers=!
+:: remove the whitespace
+SET newvar=!newvar: =! 
+:: echo what we have into the temp file
+ECHO !newvar! > temp1.txt
+:: hide the temp file
+ATTRIB +H temp1.txt
+:: read the file using = as a delimeter to remove it
+FOR /F "delims==;" %%b in (temp1.txt) DO SET endvar=%%b
+:: endvar is now version number, output to version.txt
+ECHO !endvar! > temp_version.txt
+:: hide the temp file
+ATTRIB +H temp_version.txt
+:: tidy up, unhide temp file first
+ATTRIB -H temp1.txt
+DEL temp1.txt
+:: return to where this sr was called
+EXIT /B
\ No newline at end of file

------------------------------------------------------------------------
r43 | tomun | 2020-03-14 20:55:02 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   M /get_vers/trunk/vers.txt

version

Index: vers.txt
===================================================================
--- vers.txt	(revision 42)
+++ vers.txt	(revision 43)
@@ -1 +1 @@
-1.0.0.1
\ No newline at end of file
+1.0.1.0
\ No newline at end of file

------------------------------------------------------------------------
r40 | tomun | 2020-03-14 20:53:52 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   M /get_vers/trunk/vers.txt

version

Index: vers.txt
===================================================================
--- vers.txt	(revision 39)
+++ vers.txt	(revision 40)
@@ -1 +1 @@
-1.0.0.0
\ No newline at end of file
+1.0.0.1
\ No newline at end of file

------------------------------------------------------------------------
r36 | tomun | 2020-03-14 20:52:26 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   M /get_vers/trunk/readvers.bat
   A /get_vers/trunk/vers.txt
   D /get_vers/trunk/version.txt

added some feedback text, changed output file names to be more consistent

Index: version.txt (deleted)
===================================================================
Index: readvers.bat
===================================================================
--- readvers.bat	(revision 35)
+++ readvers.bat	(revision 36)
@@ -8,15 +8,16 @@
 @echo off
 setlocal EnableDelayedExpansion
 set alphachars=$vers
-
+set versfile=vers.php
 :: find the line that doesn't have a ? and put it in text.txt
-for /F "delims=" %%a in ('findstr /v "?" vers.php ') do set var=%%a
+echo Detecting version number in %versfile%..
+for /F "delims=" %%a in ('findstr /v "?" %versfile% ') do set var=%%a
 set newvar=!var:$vers=!
-set newvar=!newvar: =!
-echo !newvar!
+set newvar=!newvar: =! 
 echo !newvar! > temp1.txt
 for /F "delims==;" %%b in (temp1.txt) do set endvar=%%b
 :: endbar is now version number, output to version.txt
-echo !endvar! > version.txt
+echo !endvar! > temp_version.txt
 :: tidy up
+echo Deleting temporary file..
 del temp1.txt
\ No newline at end of file
Index: vers.txt
===================================================================
--- vers.txt	(nonexistent)
+++ vers.txt	(revision 36)
@@ -0,0 +1 @@
+1.0.0.0
\ No newline at end of file

------------------------------------------------------------------------
r28 | tomun | 2020-03-14 20:15:09 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   D /get_vers/trunk/get_vers
   A /get_vers/trunk/readvers.bat
   A /get_vers/trunk/version.txt

im an idiot

Index: get_vers/vers.txt (deleted)
===================================================================
Index: get_vers/readvers.bat (deleted)
===================================================================
Index: readvers.bat
===================================================================
--- readvers.bat	(nonexistent)
+++ readvers.bat	(revision 28)
@@ -0,0 +1,22 @@
+:: author - tom underwood
+:: date   - 14/march/2020
+:: reads vers.php in the same directory and echoes the version number
+:: this assumes that the file follow the following expected format
+:: <?php
+::     $vers = 1.1.1.1;
+:: ?>
+@echo off
+setlocal EnableDelayedExpansion
+set alphachars=$vers
+
+:: find the line that doesn't have a ? and put it in text.txt
+for /F "delims=" %%a in ('findstr /v "?" vers.php ') do set var=%%a
+set newvar=!var:$vers=!
+set newvar=!newvar: =!
+echo !newvar!
+echo !newvar! > temp1.txt
+for /F "delims==;" %%b in (temp1.txt) do set endvar=%%b
+:: endbar is now version number, output to version.txt
+echo !endvar! > version.txt
+:: tidy up
+del temp1.txt
\ No newline at end of file
Index: version.txt
===================================================================
--- version.txt	(nonexistent)
+++ version.txt	(revision 28)
@@ -0,0 +1 @@
+$vers 

------------------------------------------------------------------------
r27 | tomun | 2020-03-14 20:14:31 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   D /get_vers/trunk/readvers.bat
   D /get_vers/trunk/vers.txt

not required

Index: vers.txt (deleted)
===================================================================
Index: readvers.bat (deleted)
===================================================================

------------------------------------------------------------------------
r26 | tomun | 2020-03-14 20:13:42 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   A /get_vers/trunk/get_vers (from /get_vers/tags/1:25)

imported version 1.0.0.0 of get_vers

Index: get_vers/readvers.bat
===================================================================
--- get_vers/readvers.bat	(nonexistent)
+++ get_vers/readvers.bat	(revision 26)
@@ -0,0 +1,22 @@
+:: author - tom underwood
+:: date   - 14/march/2020
+:: reads vers.php in the same directory and echoes the version number
+:: this assumes that the file follow the following expected format
+:: <?php
+::     $vers = 1.1.1.1;
+:: ?>
+@echo off
+setlocal EnableDelayedExpansion
+set alphachars=$vers
+
+:: find the line that doesn't have a ? and put it in text.txt
+for /F "delims=" %%a in ('findstr /v "?" vers.php ') do set var=%%a
+set newvar=!var:$vers=!
+set newvar=!newvar: =!
+echo !newvar!
+echo !newvar! > temp1.txt
+for /F "delims==;" %%b in (temp1.txt) do set endvar=%%b
+:: endbar is now version number, output to version.txt
+echo !endvar! > version.txt
+:: tidy up
+del temp1.txt
\ No newline at end of file
Index: get_vers/vers.txt
===================================================================
--- get_vers/vers.txt	(nonexistent)
+++ get_vers/vers.txt	(revision 26)
@@ -0,0 +1 @@
+1.0.0.0
\ No newline at end of file

------------------------------------------------------------------------
r24 | tomun | 2020-03-14 20:12:07 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   A /get_vers/trunk/vers.txt

Version 1.0.0.0

Index: vers.txt
===================================================================
--- vers.txt	(nonexistent)
+++ vers.txt	(revision 24)
@@ -0,0 +1 @@
+1.0.0.0
\ No newline at end of file

------------------------------------------------------------------------
r22 | tomun | 2020-03-14 19:54:46 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   A /get_vers/trunk/readvers.bat (from /autotag_test/trunk/readvers.bat:17)

moved readvers to its own repo as could be expanded to do more, regardless of the project.

Index: readvers.bat
===================================================================
--- readvers.bat	(nonexistent)
+++ readvers.bat	(revision 22)
@@ -0,0 +1,22 @@
+:: author - tom underwood
+:: date   - 14/march/2020
+:: reads vers.php in the same directory and echoes the version number
+:: this assumes that the file follow the following expected format
+:: <?php
+::     $vers = 1.1.1.1;
+:: ?>
+@echo off
+setlocal EnableDelayedExpansion
+set alphachars=$vers
+
+:: find the line that doesn't have a ? and put it in text.txt
+for /F "delims=" %%a in ('findstr /v "?" vers.php ') do set var=%%a
+set newvar=!var:$vers=!
+set newvar=!newvar: =!
+echo !newvar!
+echo !newvar! > temp1.txt
+for /F "delims==;" %%b in (temp1.txt) do set endvar=%%b
+:: endbar is now version number, output to version.txt
+echo !endvar! > version.txt
+:: tidy up
+del temp1.txt
\ No newline at end of file

------------------------------------------------------------------------
r19 | tomun | 2020-03-14 19:52:10 +0000 (Sat, 14 Mar 2020) | 1 line
Changed paths:
   A /get_vers/trunk




------------------------------------------------------------------------
